{"version":3,"sources":["../../src/handlers/local.js"],"names":[],"mappings":"oJAAA;AACA,yD;;AAEA,IAAI,UAAU,GAAG,IAAI,gBAAI,MAAR,EAAjB,C;;AAEO,IAAI,gBAAgB,GAAG,UAAS,EAAC,MAAM,EAAE,EAAC,OAAD,EAAU,eAAV,EAAT,EAAT,EAA+C;AAC3E,SAAO,UAAS,CAAT,EAAY,GAAG,GAAG,EAAlB,EAAsB,EAAE,GAAG,yBAAE,IAA7B,EAAmC;AACxC,uBAAW,wBAAX,CAAoC;AAClC,MAAA,YAAY,EAAE,eADoB;AAElC,MAAA,SAAS,EAAE,SAFuB,EAApC;AAGG,cAAS,GAAT,EAAc,IAAd,EAAoB;AACrB,UAAI,GAAJ,EAAS;AACP,cAAM,GAAN;AACD;;AAED,MAAA,GAAG,GAAG,yBAAE,YAAF,CAAe;AACnB,QAAA,GAAG,EAAE,IAAI,CAAC,WAAL,CAAiB,SADH,EAAf;AAEH,MAAA,GAFG,CAAN;AAGA,MAAA,OAAO,CAAC,CAAD,EAAI,GAAJ,EAAS,EAAT,CAAP;AACD,KAZD;AAaD,GAdD;AAeD,CAhBM,C","file":"local.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport aws from 'aws-sdk';\n\nlet _awsLambda = new aws.Lambda();\n\nexport let makeLocalHandler = function({lambda: {mainFun, awsFunctionName}}) {\n  return function(e, ctx = {}, cb = _.noop) {\n    _awsLambda.getFunctionConfiguration({\n      FunctionName: awsFunctionName,\n      Qualifier: '$LATEST'\n    }, function(err, data) {\n      if (err) {\n        throw err;\n      }\n\n      ctx = _.defaultsDeep({\n        env: data.Environment.Variables\n      }, ctx);\n      mainFun(e, ctx, cb);\n    });\n  };\n};\n\nexport default makeLocalHandler;\n"]}