{"version":3,"sources":["../../src/handlers/local.js"],"names":[],"mappings":"oJAAA;AACA,yD;;AAEA,IAAI,UAAU,GAAG,IAAI,gBAAI,MAAR,EAAjB,C;;AAEO,IAAI,gBAAgB,GAAG,UAAS;AACrC,EAAA,MAAM,EAAE;AACN,IAAA,OADM;AAEN,IAAA,eAFM,EAD6B,EAAT;;AAK3B;AACD,SAAO,UAAS,CAAT,EAAY,GAAG,GAAG,EAAlB,EAAsB,EAAE,GAAG,yBAAE,IAA7B,EAAmC;AACxC,uBAAW,wBAAX,CAAoC;AAClC,MAAA,YAAY,EAAE,eADoB;AAElC,MAAA,SAAS,EAAE,SAFuB,EAApC;AAGG,cAAS,GAAT,EAAc,IAAd,EAAoB;AACrB,UAAI,GAAJ,EAAS;AACP,cAAM,GAAN;AACD;;AAED,MAAA,CAAC,GAAG,yBAAE,YAAF,CAAe,EAAf,EAAmB,CAAnB,EAAsB;AACxB,QAAA,cAAc,EAAE,IAAI,CAAC,WAAL,CAAiB,SADT,EAAtB,CAAJ;;AAGA,MAAA,OAAO,CAAC,CAAD,EAAI,GAAJ,EAAS,EAAT,CAAP;AACD,KAZD;AAaD,GAdD;AAeD,CArBM,C","file":"local.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport aws from 'aws-sdk';\n\nlet _awsLambda = new aws.Lambda();\n\nexport let makeLocalHandler = function({\n  lambda: {\n    mainFun,\n    awsFunctionName\n  }\n}) {\n  return function(e, ctx = {}, cb = _.noop) {\n    _awsLambda.getFunctionConfiguration({\n      FunctionName: awsFunctionName,\n      Qualifier: '$LATEST'\n    }, function(err, data) {\n      if (err) {\n        throw err;\n      }\n\n      e = _.defaultsDeep({}, e, {\n        stageVariables: data.Environment.Variables\n      });\n      mainFun(e, ctx, cb);\n    });\n  };\n};\n\nexport default makeLocalHandler;\n"]}