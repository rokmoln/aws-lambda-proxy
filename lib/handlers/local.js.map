{"version":3,"sources":["../../src/handlers/local.js"],"names":[],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAI,kCAAa,IAAI,iBAAI,MAAR,EAAjB;;AAEO,IAAI,8CAAmB,UAAS,EAAC,QAAQ,EAAC,OAAD,EAAU,eAAV,EAAT,EAAT,EAA+C;AAC3E,SAAO,UAAS,CAAT,EAAY,MAAM,EAAlB,EAAsB,KAAK,0BAAE,IAA7B,EAAmC;AACxC,uBAAW,wBAAX,CAAoC;AAClC,oBAAc,eADoB;AAElC,iBAAW;AAFuB,KAApC,EAGG,UAAS,GAAT,EAAc,IAAd,EAAoB;AACrB,UAAI,GAAJ,EAAS;AACP,cAAM,GAAN;AACD;;AAED,YAAM,0BAAE,YAAF,CAAe;AACnB,aAAK,KAAK,WAAL,CAAiB;AADH,OAAf,EAEH,GAFG,CAAN;AAGA,cAAQ,CAAR,EAAW,GAAX,EAAgB,EAAhB;AACD,KAZD;AAaD,GAdD;AAeD,CAhBM","file":"local.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport aws from 'aws-sdk';\n\nlet _awsLambda = new aws.Lambda();\n\nexport let makeLocalHandler = function({lambda: {mainFun, awsFunctionName}}) {\n  return function(e, ctx = {}, cb = _.noop) {\n    _awsLambda.getFunctionConfiguration({\n      FunctionName: awsFunctionName,\n      Qualifier: '$LATEST'\n    }, function(err, data) {\n      if (err) {\n        throw err;\n      }\n\n      ctx = _.defaultsDeep({\n        env: data.Environment.Variables\n      }, ctx);\n      mainFun(e, ctx, cb);\n    });\n  };\n};\n\nexport default makeLocalHandler;\n"]}