{"version":3,"sources":["../src/env.js"],"names":[],"mappings":"mJAAA;AACA,gD;;AAEO,IAAI,MAAM,GAAG,QAAQ,IAAR,CAAa,OAAO,CAAC,GAAR,CAAY,QAAzB,CAAb,C;;AAEP,yBAAE,QAAF,CAAW,OAAO,CAAC,GAAnB,EAAwB;AACtB,EAAA,IAAI,EAAE,MADgB;AAEtB,EAAA,UAAU,EAAE,EAFU;AAGtB,EAAA,UAAU,EAAE,EAHU;AAItB,EAAA,SAAS,EAAE,MAJW;AAKtB,EAAA,QAAQ,EAAE,EALY;AAMtB,EAAA,SAAS,EAAE,EANW,EAAxB;;;AASA,IAAI,eAAJ,EAAa;AACX,2BAAE,QAAF,CAAW,OAAO,CAAC,GAAnB,EAAwB;AACtB,IAAA,UAAU,EAAE,WADU;AAEtB,IAAA,UAAU,EAAE,MAFU;AAGtB,IAAA,qBAAqB,EAAE,UAHD,EAAxB;;;AAMA,EAAA,KAAK,CAAC,eAAN,GAAwB,QAAxB;AACD;;AAED;;AAEO,IAAI,KAAK,GAAG;AACjB,EAAA,WAAW,EAAE,yBAAE,QAAF,CAAW,aAAX,CADI;AAEjB,EAAA,aAAa,EAAE,yBAAE,QAAF,CAAW,eAAX,CAFE;AAGjB,EAAA,SAAS,EAAE,yBAAE,QAAF,CAAW,WAAX,CAHM,EAAZ,C;;;AAMP,IAAI,OAAO,CAAC,GAAR,CAAY,YAAhB,EAA8B;AAC5B,kBAAA,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,GAAR,CAAY,YAAb,CAAf;AACD,CAFD,MAEO;AACL,EAAA,OAAO,CAAC,KAAR,CAAc,oCAAd;AACA;AACA,EAAA,OAAO,CAAC,IAAR,CAAa,CAAb;AACD;;AAEM,IAAI,GAAG,GAAG;AACf,EAAA,OAAO,EAAE,WADM;AAEf,EAAA,SAAS,EAAE,iBAAS,YAAG,IAAH,GAAU,MAAnB,GAA4B,CAFxB;AAGf,EAAA,SAAS,EAAE;AACT,IAAA,QAAQ,EAAE,EADD,EACK;AACd,IAAA,eAAe,EAAE,SAFR,CAEkB;AAFlB,GAHI;AAOf,EAAA,MAAM,gBAPS;AAQf,EAAA,KAAK,eARU;AASf,EAAA,GAAG,EAAE;AACH,IAAA,KAAK,EAAE,OAAO,CAAC,GAAR,CAAY,SADhB;AAEH,IAAA,KAAK,EAAE,SAFJ,CAEc;AAFd,GATU;AAaf,EAAA,IAAI,EAAE,OAAO,CAAC,GAAR,CAAY,IAbH,EAAV,C","file":"env.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport os from 'os';\n\nexport let isProd = /^prod/.test(process.env.NODE_ENV);\n\n_.defaults(process.env, {\n  PORT: '8081',\n  DEBUG_HOST: '',\n  DEBUG_PORT: '',\n  LOG_LEVEL: 'INFO',\n  NODE_ENV: '',\n  NODE_PATH: ''\n});\n\nif (!isProd) {\n  _.defaults(process.env, {\n    DEBUG_HOST: 'localhost',\n    DEBUG_PORT: '9999',\n    NODE_HEAPDUMP_OPTIONS: 'nosignal'\n  });\n\n  Error.stackTraceLimit = Infinity;\n}\n\n// MAIN\n\nexport let hooks = {\n  findLambdas: _.abstract('findLambdas'),\n  preRouteSetup: _.abstract('preRouteSetup'),\n  preHandle: _.abstract('preHandle')\n};\n\nif (process.env.HOOKS_MODULE) {\n  hooks = require(process.env.HOOKS_MODULE);\n} else {\n  console.error('Env variable HOOKS_MODULE not set!');\n  // eslint-disable-next-line no-process-exit\n  process.exit(1);\n}\n\nexport let env = {\n  address: '127.0.0.1',\n  forkCount: isProd ? os.cpus().length : 0,\n  heartbeat: {\n    interval: 15, // minutes, 0 to disable\n    memThresholdRss: undefined // MB\n  },\n  isProd,\n  hooks,\n  log: {\n    level: process.env.LOG_LEVEL,\n    toDir: undefined // isProd ? undefined : '.'\n  },\n  port: process.env.PORT\n};\n\nexport default env;\n"]}