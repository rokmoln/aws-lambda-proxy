{"version":3,"sources":["../src/env.js"],"names":[],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAI,0BAAS,QAAQ,IAAR,CAAa,QAAQ,GAAR,CAAY,QAAzB,CAAb;;AAEA,0BAAE,QAAF,CAAW,QAAQ,GAAnB,EAAwB;AACtB,QAAM,MADgB;AAEtB,cAAY,EAFU;AAGtB,cAAY,EAHU;AAItB,aAAW,MAJW;AAKtB,YAAU,EALY;AAMtB,aAAW;AANW,CAAxB;;AASA,IAAI,eAAJ,EAAa;AACX,4BAAE,QAAF,CAAW,QAAQ,GAAnB,EAAwB;AACtB,gBAAY,WADU;AAEtB,gBAAY,MAFU;AAGtB,2BAAuB;AAHD,GAAxB;;AAMA,QAAM,eAAN,GAAwB,QAAxB;AACD;;AAED;;AAEA,IAAI,wBAAQ;AACV,eAAa,0BAAE,IADL;AAEV,iBAAe,0BAAE,IAFP;AAGV,aAAW,0BAAE;AAHH,CAAZ;;AAMA,IAAI,QAAQ,GAAR,CAAY,YAAhB,EAA8B;AAC5B,UAPE,KAOF,WAAQ,QAAQ,QAAQ,GAAR,CAAY,YAApB,CAAR;AACD;;AAED,IAAI,oBAAM;AACR,WAAS,WADD;AAER,aAAW,iBAAS,aAAG,IAAH,GAAU,MAAnB,GAA4B,CAF/B;AAGR,aAAW;AACT,cAAU,EADD,EACK;AACd,qBAAiB,SAFR,CAEkB;AAFlB,GAHH;AAOR,wBAPQ;AAQR,sBARQ;AASR,OAAK;AACH,WAAO,QAAQ,GAAR,CAAY,SADhB;AAEH,WAAO,SAFJ,CAEc;AAFd,GATG;AAaR,QAAM,QAAQ,GAAR,CAAY;AAbV,CAAV;;AAgBA,OAAO,OAAP","file":"env.js","sourcesContent":["import _ from 'lodash-firecloud';\nimport os from 'os';\n\nlet isProd = /^prod/.test(process.env.NODE_ENV);\n\n_.defaults(process.env, {\n  PORT: '8081',\n  DEBUG_HOST: '',\n  DEBUG_PORT: '',\n  LOG_LEVEL: 'INFO',\n  NODE_ENV: '',\n  NODE_PATH: ''\n});\n\nif (!isProd) {\n  _.defaults(process.env, {\n    DEBUG_HOST: 'localhost',\n    DEBUG_PORT: '9999',\n    NODE_HEAPDUMP_OPTIONS: 'nosignal'\n  });\n\n  Error.stackTraceLimit = Infinity;\n}\n\n// MAIN\n\nlet hooks = {\n  findLambdas: _.noop,\n  preRouteSetup: _.noop,\n  preHandle: _.noop\n};\n\nif (process.env.HOOKS_MODULE) {\n  hooks = require(process.env.HOOKS_MODULE);\n}\n\nlet env = {\n  address: '127.0.0.1',\n  forkCount: isProd ? os.cpus().length : 0,\n  heartbeat: {\n    interval: 15, // minutes, 0 to disable\n    memThresholdRss: undefined // MB\n  },\n  isProd,\n  hooks,\n  log: {\n    level: process.env.LOG_LEVEL,\n    toDir: undefined // isProd ? undefined : '.'\n  },\n  port: process.env.PORT\n};\n\nmodule.exports = env;\n"]}